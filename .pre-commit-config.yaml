default_language_version:
  python: python3
fail_fast: false

repos:
  # Ruff: format + lint
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.14.8
    hooks:
      - id: ruff
        args: ["--fix"]
      - id: ruff-format

  # EditorConfig checker
  - repo: https://github.com/editorconfig-checker/editorconfig-checker.python
    rev: 3.6.0
    hooks:
      - id: editorconfig-checker

  # Poly check (local project tool)
  - repo: local
    hooks:
      - id: poly-check
        name: poly-check
        entry: poly check
        language: python
        additional_dependencies:
          - polylith-cli>=1.35.0
        pass_filenames: false

  # Mypy
  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.19.0
    hooks:
      - id: mypy
        stages: [pre-push]

  # Pytest (run tests before push)
  - repo: local
    hooks:
      - id: pytest
        name: pytest
        entry: pytest
        language: python
        pass_filenames: false
        args: ["test"]
        stages: [pre-push]
